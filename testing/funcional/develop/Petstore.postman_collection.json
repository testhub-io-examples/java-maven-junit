{
	"info": {
		"_postman_id": "bf117566-c1f9-475a-a913-dbcce62fa93f",
		"name": "Petstore",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
		"_exporter_id": "2723253"
	},
	"item": [
		{
			"name": "https://petstore.swagger.io/v2/pet/1",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Pedimos a nuestro response payload que tengo Content-Type en el header\r",
							"pm.test(\"Content-Type existe\", function () {\r",
							"    pm.response.to.have.header(\"Content-Type\");\r",
							"});\r",
							"// Y comprobamos que la petición se haya servido en un determinado tiempo\r",
							"pm.test(\"Respondio en menos de 900ms\", function () {\r",
							"    pm.expect(pm.response.responseTime).to.be.below(900);\r",
							"});\r",
							"pm.test('Disponibilidad de API', function() {\r",
							"     pm.response.to.be.ok; // equivalente a decir que valide que sea 200\r",
							"     pm.response.to.be.withBody; // body tiene que exitir\r",
							"     pm.response.to.be.json; // además que sea un JSON válido\r",
							"});\r",
							"\r",
							"var responseData = JSON.parse(responseBody);\r",
							"tests[\"salida: \" + responseBody] = true;\r",
							"\r",
							"var schema = {\r",
							"    \"$schema\": \"https://json-schema.org/draft/2019-09/schema\",\r",
							"    \"$id\": \"http://example.com/example.json\",\r",
							"    \"type\": \"object\",\r",
							"    \"title\": \"Root Schema\",\r",
							"    \"required\": [\r",
							"        \"id\",\r",
							"        \"category\",\r",
							"        \"name\",\r",
							"        \"photoUrls\",\r",
							"        \"tags\",\r",
							"        \"status\"\r",
							"    ],\r",
							"    \"properties\": {\r",
							"        \"id\": {\r",
							"            \"type\": \"integer\",\r",
							"            \"default\": 0,\r",
							"            \"title\": \"The id Schema\",\r",
							"            \"examples\": [\r",
							"                1\r",
							"            ]\r",
							"        },\r",
							"        \"category\": {\r",
							"            \"type\": \"object\",\r",
							"            \"default\": {},\r",
							"            \"title\": \"The category Schema\",\r",
							"            \"required\": [\r",
							"                \"id\",\r",
							"                \"name\",\r",
							"            ],\r",
							"            \"properties\": {\r",
							"                \"id\": {\r",
							"                    \"type\": \"integer\",\r",
							"                    \"default\": 0,\r",
							"                    \"title\": \"The id Schema\",\r",
							"                    \"examples\": [\r",
							"                        1\r",
							"                    ]\r",
							"                },\r",
							"                \"name\": {\r",
							"                    \"type\": \"string\",\r",
							"                    \"default\": \"\",\r",
							"                    \"title\": \"The name Schema\",\r",
							"                    \"examples\": [\r",
							"                        \"string\"\r",
							"                    ]\r",
							"                },\r",
							"                \"age\": {\r",
							"                    \"type\": \"int\",\r",
							"                    \"default\": \"\",\r",
							"                    \"title\": \"The name Schema\",\r",
							"                    \"examples\": [\r",
							"                        \"string\"\r",
							"                    ]\r",
							"                }\r",
							"            },\r",
							"            \"examples\": [{\r",
							"                \"id\": 1,\r",
							"                \"name\": \"string\"\r",
							"            }]\r",
							"        },\r",
							"        \"name\": {\r",
							"            \"type\": \"string\",\r",
							"            \"default\": \"\",\r",
							"            \"title\": \"The name Schema\",\r",
							"            \"examples\": [\r",
							"                \"doggie\"\r",
							"            ]\r",
							"        },\r",
							"        \"photoUrls\": {\r",
							"            \"type\": \"array\",\r",
							"            \"default\": [],\r",
							"            \"title\": \"The photoUrls Schema\",\r",
							"            \"items\": {\r",
							"                \"type\": \"string\",\r",
							"                \"default\": \"\",\r",
							"                \"title\": \"A Schema\",\r",
							"                \"examples\": [\r",
							"                    \"string\"\r",
							"                ]\r",
							"            },\r",
							"            \"examples\": [\r",
							"                [\r",
							"                    \"string\"]\r",
							"            ]\r",
							"        },\r",
							"        \"tags\": {\r",
							"            \"type\": \"array\",\r",
							"            \"default\": [],\r",
							"            \"title\": \"The tags Schema\",\r",
							"            \"items\": {\r",
							"                \"type\": \"object\",\r",
							"                \"default\": {},\r",
							"                \"title\": \"A Schema\",\r",
							"                \"required\": [\r",
							"                    \"id\",\r",
							"                    \"name\"\r",
							"                ],\r",
							"                \"properties\": {\r",
							"                    \"id\": {\r",
							"                        \"type\": \"integer\",\r",
							"                        \"default\": 0,\r",
							"                        \"title\": \"The id Schema\",\r",
							"                        \"examples\": [\r",
							"                            1\r",
							"                        ]\r",
							"                    },\r",
							"                    \"name\": {\r",
							"                        \"type\": \"string\",\r",
							"                        \"default\": \"\",\r",
							"                        \"title\": \"The name Schema\",\r",
							"                        \"examples\": [\r",
							"                            \"string\"\r",
							"                        ]\r",
							"                    }\r",
							"                },\r",
							"                \"examples\": [{\r",
							"                    \"id\": 1,\r",
							"                    \"name\": \"string\"\r",
							"                }]\r",
							"            },\r",
							"            \"examples\": [\r",
							"                [{\r",
							"                    \"id\": 1,\r",
							"                    \"name\": \"string\"\r",
							"                }]\r",
							"            ]\r",
							"        },\r",
							"        \"status\": {\r",
							"            \"type\": \"string\",\r",
							"            \"default\": \"\",\r",
							"            \"title\": \"The status Schema\",\r",
							"            \"examples\": [\r",
							"                \"available\"\r",
							"            ]\r",
							"        }\r",
							"    },\r",
							"    \"examples\": [{\r",
							"        \"id\": 1,\r",
							"        \"category\": {\r",
							"            \"id\": 1,\r",
							"            \"name\": \"string\"\r",
							"        },\r",
							"        \"name\": \"doggie\",\r",
							"        \"photoUrls\": [\r",
							"            \"string\"\r",
							"        ],\r",
							"        \"tags\": [{\r",
							"            \"id\": 1,\r",
							"            \"name\": \"string\"\r",
							"        }],\r",
							"        \"status\": \"available\"\r",
							"    }]\r",
							"};\r",
							"\r",
							"tv4.addSchema(schema);\r",
							"var valid_schema = tv4.validateResult(responseData, schema).valid;\r",
							"if(valid_schema){\r",
							"    tests[\"Esquema valido\"] = true;\r",
							"}else{\r",
							"    tests[\"Esquema invalido, path [\"+ tv4.validateResult(responseData, schema).error.dataPath +\"] Error: \" + tv4.validateResult(responseData, schema).error.message] = false;\r",
							"}\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.test(\"Valor dentro de los permitidos\", function () {\r",
							"    const valorParametro = pm.variables.get(\"valor\");\r",
							"    if (valorParametro !== null) {\r",
							"        const numero = parseInt(valorParametro);\r",
							"        if (Number.isInteger(numero)) {\r",
							"            console.log('El dato es un número');\r",
							"        } else {\r",
							"            pm.expect.fail(\"Tipo de dato no valido\");\r",
							"        }\r",
							"        \r",
							"    } else {\r",
							"        pm.expect.fail(\"El parámetro 'valor' no está presente en la URL\");\r",
							"    }\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": "{{base_url}}/v2/pet/{{valor}}"
			},
			"response": []
		},
		{
			"name": "{{base_url}}/v2/pet",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"type\": \"object\",\r\n    \"title\": \"Root Schema\",\r\n    \"required\": [\r\n        \"id\",\r\n        \"category\",\r\n        \"name\",\r\n        \"photoUrls\",\r\n        \"tags\",\r\n        \"status\",\r\n        \"age\"\r\n    ],\r\n    \"properties\": {\r\n        \"id\": {\r\n            \"type\": \"integer\",\r\n            \"default\": 0,\r\n            \"title\": \"The id Schema\",\r\n            \"examples\": [\r\n                0\r\n            ]\r\n        },\r\n        \"category\": {\r\n            \"type\": \"object\",\r\n            \"default\": {},\r\n            \"title\": \"The category Schema\",\r\n            \"required\": [\r\n                \"id\",\r\n                \"name\"\r\n            ],\r\n            \"properties\": {\r\n                \"id\": {\r\n                    \"type\": \"integer\",\r\n                    \"default\": 0,\r\n                    \"title\": \"The id Schema\",\r\n                    \"examples\": [\r\n                        0\r\n                    ]\r\n                },\r\n                \"name\": {\r\n                    \"type\": \"string\",\r\n                    \"default\": \"string\",\r\n                    \"title\": \"The name Schema\",\r\n                    \"examples\": [\r\n                        \"string\"\r\n                    ]\r\n                }\r\n            },\r\n            \"examples\": [{\r\n                \"id\": 0,\r\n                \"name\": \"string\"\r\n            }]\r\n        },\r\n        \"name\": {\r\n            \"type\": \"string\",\r\n            \"default\": \"doggie\",\r\n            \"title\": \"The name Schema\",\r\n            \"examples\": [\r\n                \"doggie\"\r\n            ]\r\n        },\r\n        \"photoUrls\": {\r\n            \"type\": \"array\",\r\n            \"default\": [\"string\"],\r\n            \"title\": \"The photoUrls Schema\",\r\n            \"items\": {\r\n                \"type\": \"string\",\r\n                \"default\": \"\",\r\n                \"title\": \"A Schema\",\r\n                \"examples\": [\r\n                    \"string\"\r\n                ]\r\n            },\r\n            \"examples\": [\r\n                [\r\n                    \"string\"]\r\n            ]\r\n        },\r\n        \"tags\": {\r\n            \"type\": \"array\",\r\n            \"default\": [\"string\"],\r\n            \"title\": \"The tags Schema\",\r\n            \"items\": {\r\n                \"type\": \"object\",\r\n                \"default\": {},\r\n                \"title\": \"A Schema\",\r\n                \"required\": [\r\n                    \"id\",\r\n                    \"name\"\r\n                ],\r\n                \"properties\": {\r\n                    \"id\": {\r\n                        \"type\": \"integer\",\r\n                        \"default\": 0,\r\n                        \"title\": \"The id Schema\",\r\n                        \"examples\": [\r\n                            0\r\n                        ]\r\n                    },\r\n                    \"name\": {\r\n                        \"type\": \"string\",\r\n                        \"default\": \"string\",\r\n                        \"title\": \"The name Schema\",\r\n                        \"examples\": [\r\n                            \"string\"\r\n                        ]\r\n                    }\r\n                },\r\n                \"examples\": [{\r\n                    \"id\": 0,\r\n                    \"name\": \"string\"\r\n                }]\r\n            },\r\n            \"examples\": [\r\n                [{\r\n                    \"id\": 0,\r\n                    \"name\": \"string\"\r\n                }]\r\n            ]\r\n        },\r\n        \"status\": {\r\n            \"type\": \"string\",\r\n            \"default\": \"available\",\r\n            \"title\": \"The status Schema\",\r\n            \"examples\": [\r\n                \"available\"\r\n            ]\r\n        }\r\n    },\r\n    \"examples\": [{\r\n        \"id\": 0,\r\n        \"category\": {\r\n            \"id\": 0,\r\n            \"name\": \"string\"\r\n        },\r\n        \"name\": \"doggie\",\r\n        \"photoUrls\": [\r\n            \"string\"\r\n        ],\r\n        \"tags\": [{\r\n            \"id\": 0,\r\n            \"name\": \"string\"\r\n        }],\r\n        \"status\": \"available\"\r\n    }]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": "{{base_url}}/v2/pet"
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": ""
		}
	]
}
